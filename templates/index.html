<html>
<head>
    <title>home page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="{{ url_for('static', path='/styles.css') }}" rel="stylesheet">
</head>
<body>

  <div class="container text-center">
    <h1>alarm_time: {{ alarm_time }}</h1>
    <h1>colour: {{ colour }}</h1>


    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="red" autocomplete="off" {% if colour == "red" %}checked{% endif %} onclick="changeColour('red')">
    <label class="btn btn-primary" for="red">red</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="orange" autocomplete="off" {% if colour == "orange" %}checked{% endif %} onclick="changeColour('orange')">
    <label class="btn btn-primary" for="orange">orange</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="yellow" autocomplete="off" {% if colour == "yellow" %}checked{% endif %} onclick="changeColour('yellow')">
    <label class="btn btn-primary" for="yellow">yellow</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="green" autocomplete="off" {% if colour == "green" %}checked{% endif %} onclick="changeColour('green')">
    <label class="btn btn-primary" for="green">green</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="blue" autocomplete="off" {% if colour == "blue" %}checked{% endif %} onclick="changeColour('blue')">
    <label class="btn btn-primary" for="blue">blue</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="purple" autocomplete="off" {% if colour == "purple" %}checked{% endif %} onclick="changeColour('purple')">
    <label class="btn btn-primary" for="purple">purple</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="white" autocomplete="off" {% if colour == "white" %}checked{% endif %} onclick="changeColour('white')">
    <label class="btn btn-primary" for="white">white</label>
    <input type="radio" class="btn-check rounded-circle" name="options-outlined" id="pink" autocomplete="off" {% if colour == "pink" %}checked{% endif %} onclick="changeColour('pink')">
    <label class="btn btn-primary" for="pink">pink</label>

    <h1>intensity:</h1>
    <button class="btn btn-outline-secondary btn-lg" type="button" id="decrease-intensity">-</button>
    <button class="btn btn-outline-primary btn-lg" type="button" id="increase-intensity">+</button>

    <h1>lights:</h1>

    
    <div class="form-check form-switch text-center">
        <input id= "lights_on_off" class="form-check-input" style="transform: scale(2);" type="checkbox" role="switch" id="flexSwitchCheckDefault" {% if lights_on %}checked{% endif %}>
    </div>
  </div>
</body>

<script>
    const ip = location.host
    const apiUrlBase = 'http://' + ip + '/';
    const toggleLightsEndpoint = 'toggle-lights-on/';
    const increaseIntensityEndpoint = 'inc-intensity/';
    const decreaseIntensityEndpoint = 'dec-intensity/';
    const changeCOlourEndpoint = 'change-colour/';

    document.getElementById('lights_on_off').addEventListener('click', function() {
      const apiUrl = apiUrlBase + toggleLightsEndpoint;
  
      fetch(apiUrl, {
        method: "POST",
        headers: {
            "Content-type": "application/json; charset=UTF-8"
        }
        }).then((response) => response.json()).then((json) => console.log(json));
    });

    document.getElementById('decrease-intensity').addEventListener('click', function() {
      const apiUrl = apiUrlBase + decreaseIntensityEndpoint;
  
      fetch(apiUrl, {
        method: "POST",
        headers: {
            "Content-type": "application/json; charset=UTF-8"
        }
        }).then((response) => response.json()).then((json) => console.log(json));
    });

    document.getElementById('increase-intensity').addEventListener('click', function() {
      const apiUrl = apiUrlBase + increaseIntensityEndpoint;
  
      fetch(apiUrl, {
        method: "POST",
        headers: {
            "Content-type": "application/json; charset=UTF-8"
        }
        }).then((response) => response.json()).then((json) => console.log(json));
    });

    function changeColour(colour) {
      const apiUrl = apiUrlBase + changeCOlourEndpoint + colour;

      fetch(apiUrl, {
        method: "POST",
        headers: {
            "Content-type": "application/json; charset=UTF-8"
        }
        }).then((response) => response.json()).then((json) => console.log(json));
      }
  </script>

</html>